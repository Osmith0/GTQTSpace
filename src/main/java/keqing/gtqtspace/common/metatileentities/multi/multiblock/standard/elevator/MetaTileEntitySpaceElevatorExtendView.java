package keqing.gtqtspace.common.metatileentities.multi.multiblock.standard.elevator;

import codechicken.lib.render.CCRenderState;
import codechicken.lib.render.pipeline.IVertexOperation;
import codechicken.lib.vec.Matrix4;
import gregtech.api.capability.IEnergyContainer;
import gregtech.api.capability.IOpticalComputationHatch;
import gregtech.api.capability.IOpticalComputationProvider;
import gregtech.api.capability.impl.EnergyContainerList;
import gregtech.api.gui.GuiTextures;
import gregtech.api.gui.ModularUI;
import gregtech.api.gui.widgets.AdvancedTextWidget;
import gregtech.api.gui.widgets.ClickButtonWidget;
import gregtech.api.gui.widgets.ImageCycleButtonWidget;
import gregtech.api.gui.widgets.ImageWidget;
import gregtech.api.metatileentity.MetaTileEntity;
import gregtech.api.metatileentity.interfaces.IGregTechTileEntity;
import gregtech.api.metatileentity.multiblock.IMultiblockPart;
import gregtech.api.metatileentity.multiblock.MultiblockAbility;
import gregtech.api.metatileentity.multiblock.MultiblockDisplayText;
import gregtech.api.metatileentity.multiblock.MultiblockWithDisplayBase;
import gregtech.api.pattern.BlockPattern;
import gregtech.api.pattern.FactoryBlockPattern;
import gregtech.api.pattern.PatternMatchContext;
import gregtech.api.pattern.TraceabilityPredicate;
import gregtech.api.util.TextComponentUtil;
import gregtech.client.renderer.ICubeRenderer;
import gregtech.client.renderer.texture.Textures;
import keqing.gtqtspace.api.multiblock.ISpaceElevatorProvider;
import keqing.gtqtspace.api.multiblock.ISpaceElevatorReceiver;
import keqing.gtqtspace.api.predicate.TiredTraceabilityPredicate;
import keqing.gtqtspace.api.utils.GTQTSUtil;
import keqing.gtqtspace.client.textures.GTQTSTextures;
import keqing.gtqtspace.common.block.GTQTSMetaBlocks;
import keqing.gtqtspace.common.block.blocks.GTQTSpaceElevator;
import net.minecraft.block.Block;
import net.minecraft.block.state.IBlockState;
import net.minecraft.client.resources.I18n;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.item.ItemStack;
import net.minecraft.nbt.NBTTagCompound;
import net.minecraft.network.PacketBuffer;
import net.minecraft.tileentity.TileEntity;
import net.minecraft.util.ResourceLocation;
import net.minecraft.util.text.ITextComponent;
import net.minecraft.util.text.TextFormatting;
import net.minecraft.world.World;
import net.minecraftforge.fml.relauncher.Side;
import net.minecraftforge.fml.relauncher.SideOnly;

import javax.annotation.Nonnull;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.List;
import java.util.concurrent.ConcurrentHashMap;

import static gregtech.api.unification.material.Materials.Naquadah;
import static gregtech.api.unification.material.Materials.TungstenSteel;
import static gregtech.api.util.RelativeDirection.*;

public class MetaTileEntitySpaceElevatorExtendView extends MultiblockWithDisplayBase implements ISpaceElevatorProvider {

    public MetaTileEntitySpaceElevatorExtendView(ResourceLocation metaTileEntityId) {
        super(metaTileEntityId);
    }

    @Override
    protected void updateFormedValid() {

    }
    @Override
    public int getMotorTier() {
        return 0;
    }
    @Override
    public IEnergyContainer getEnergyContainerForModules() {
        return null;
    }

    @Override
    public boolean amIInTheList(ISpaceElevatorReceiver receiver) {
        return false;
    }


    @Override
    public IOpticalComputationProvider getComputationProvider() {
        return null;
    }

    @Override
    public MetaTileEntity createMetaTileEntity(IGregTechTileEntity iGregTechTileEntity) {
        return new MetaTileEntitySpaceElevatorExtendView(metaTileEntityId);
    }

    @Override
    protected BlockPattern createStructurePattern() {
        return FactoryBlockPattern.start(RIGHT, DOWN, FRONT)
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                    FFFFFFF                    ","                    AAAAAAA                    ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                     V V V                     ","                     V V V                     ","                     V V V                     ","                   FFV V VFF                   ","                 AAAAV V VAAAA                 ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                     V V V                     ","                     I I I                     ","                     V V V                     ","                   FFV V VFF                   ","              AAAAAAAV V VAAAAAAA              ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                   FFF F FFF                   ","            AAAAAAAAAA   AAAAAAAAAA            ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                  FFFF F FFFF                  ","          AAAA   AAAAA   AAAAA   AAAA          ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                  FFFF F FFFF                  ","        AAAA     AAAAA   AAAAA     AAAA        ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                  FFFFFFFFFFF                  ","       AAA      AAAAAAAAAAAAAAA      AAA       ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                     D   D                     ","                  FFFFF FFFFF                  ","      AAA       AAAAAAAAAAAAAAA       AAA      ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                  DDDDE EDDDD                  ","                FFFFFFF FFFFFFF                ","     AAA        AAAAAAAAAAAAAAA        AAA     ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                DD   DE ED   DD                ","               FFFFFFD   DFFFFFF               ","     AA       AAAAAAAAAAAAAAAAAAA       AA     ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     D   D                     ","               FFF           FFF               ","    AA       AAAAAAAAAAAAAAAAAAAAA       AA    ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                                               ","                                               ","    AA      AAAAAAAAAAAAAAAAAAAAAAA      AA    ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                                               ","                                               ","                                               ","   AA      AAAAAAAAAAAAAAAAAAAAAAAAA      AA   ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                    HDE EDH                    ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                                               ","                                               ","                                               ","                                               ","                                               ","   AA     AAAAAAAAAAAAAAAAAAAAAAAAAAA     AA   ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                  HH DE ED HH                  ","                                               ","                                               ","                                               ","                                               ","                     V V V                     ","                     V V V                     ","                     V V V                     ","                     V V V                     ","  AA     AAAAAAAAAAAAV V VAAAAAAAAAAAA     AA  ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                                               ","               E               E               ","               EHH           HHE               ","               E               E               ","               E               E               ","               E               E               ","               E               E               ","               E     V V V     E               ","               E     I I I     E               ","               E     V V V     E               ","         FF    E     V V V     E    FF         ","  AA     AAAAAAAAAAAAV V VAAAAAAAAAAAA     AA  ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                E             E                ","                E             E                ","                E             E                ","                E             E                ","                E             E                ","               HE             EH               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","         D                           D         ","        FFF          F F F          FFF        ","  AA  AAAAAAAAAAAAAAA     AAAAAAAAAAAAAAA  AA  ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                                               ","                                               ","                 E           E                 ","                 E           E                 ","                 E           E                 ","                 E           E                 ","                 E           E                 ","                                               ","                                               ","               H               H               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","         D                           D         ","        FFF          F F F          FFF        "," AAAAAAAAAAAAAAAAAAAA     AAAAAAAAAAAAAAAAAAAA ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                                               ","                                               ","                                               ","                                               ","                                               ","                   HH     HH                   ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                                               ","                                               ","                                               ","                                               ","                                               ","              H                 H              ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","        D                             D        ","    FFFFFF          FFFFFFF          FFFFFF    "," AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      FFF                      ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                   E       E                   ","                   E       E                   ","                   E       E                   ","                   E       E                   ","                   E       E                   ","                   E       E                   ","                   E       E                   ","                  HE       EH                  ","                   E       E                   ","                   E       E                   ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","              H                 H              ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","        D                             D        "," FFFFFFFFF         FFFFFFFFF         FFFFFFFFF "," AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA ")
                .aisle("                      FFF                      ","                       E                       ","                       E                       ","                       E                       ","                       E                       ","                       E                       ","                     F   F                     ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                                               ","                                               ","                      FFF                      ","                                               ","                                               ","                  H         H                  ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      FFF                      ","                                               ","                                               ","                                               ","                                               ","             H                   H             ","                                               ","                                               ","                                               ","                                               ","                      XXX                      ","                      X~X                      ","        D             XXX             D        ","FFFFFFFFFF        FFFFFFFFFFF        FFFFFFFFFF","AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA")
                .aisle("                     F D F                     ","                       D                       ","                       D                       ","                       D                       ","                       D                       ","                       D                       ","                    F  D  F                    ","                       D                       ","                  D    D    D                  ","                  D    D    D                  ","                  D    D    D                  ","                  D    D    D                  ","                  D    D    D                  ","                  D    D    D                  ","                  D    D    D                  ","                 DD    D    DD                 ","                 D     D     D                 ","                 D     D     D                 ","                 D   F D F   D                 ","                 D     C     D                 ","                 D     C     D                 ","                 D     C     D                 ","                 D     C     D                 ","                DD     C     DD                ","                D      C      D                ","                D      C      D                ","                D      C      D                ","               DD      C      DD               ","               D     FDCDF     D               ","               D      DCD      D               ","              DD      DCD      DD              ","              D       DCD       D              ","              D       DCD       D              ","             DD      DDCDD      DD             ","             D       D C D       D             ","             D       D C D       D             ","            DD       D C D       DD            ","            D        D C D        D            "," VV        DD VV     XDCDX     VV DD        VV "," VI       DD  VI     XDCDX     IV  DD       IV "," VV    DDDD   VV     XDCDX     VV   DDDD    VV ","FVVFFFFFFD    VVFFFFFDDDDDFFFFFVV    DFFFFFFVVF","AVVAAAAAAAAAAAVV  AAAXXXXXAAA  VVAAAAAAAAAAAVVA")
                .aisle("                    F     F                    ","                                               ","                                               ","                                               ","                                               ","                                               ","                   F       F                   ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                 EE         EE                 ","                 EE         EE                 ","                 E           E                 ","                 E           E                 ","                 E  F     F  E                 ","                 E           E                 ","                 E           E                 ","                 E           E                 ","                EE           EE                ","                EE           EE                ","                E             E                ","                E             E                ","               EE             EE               ","               EE             EE               ","               E    FD   DF    E               ","              EE     D   D     EE              ","              EE     D   D     EE              ","              E      D   D      E              ","             EE      D   D      EE             ","             EE      D   D      EE             ","             E                   E             ","            EE                   EE            ","            EE                   EE            ","           EE                     EE           ","          EEE       XD   DX       EEE          ","         EEE        XD   DX        EEE         ","        EE          XD   DX          EE        ","F     FFF         FFFDDDDDFFF         FFF     F","A     AAAAAAAA    AAAXXXXXAAA    AAAAAAAA     A")
                .aisle("                    FD   DF                    ","                    ED   DE                    ","                    ED   DE                    ","                    ED   DE                    ","                    ED   DE                    ","                    ED   DE                    ","                   F D   D F                   ","                     D   D                     ","                     D   D                     ","                     D   D                     ","                     D   D                     ","                     D   D                     ","                     D   D                     ","                     D   D                     ","                     D   D                     ","                     D   D                     ","                     D   D                     ","                     D B D                     ","                    FD - DF                    ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                    FC - CF                    ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                     C - C                     ","                     C - C                     "," VV           VV    XC - CX    VV           VV "," VI           VI    XC - CX    IV           IV "," VV           VV    XC - CX    VV           VV ","FVVFFFF       VVFFFFFDDDDDFFFFFVV       FFFFVVF","AVV   AAAAAAAAVV  AAAXXXXXAAA  VVAAAAAAAA   VVA")
                .aisle("                    F     F                    ","                                               ","                                               ","                                               ","                                               ","                                               ","                   F       F                   ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                 EE         EE                 ","                 EE         EE                 ","                 E           E                 ","                 E           E                 ","                 E  F     F  E                 ","                 E           E                 ","                 E           E                 ","                 E           E                 ","                EE           EE                ","                EE           EE                ","                E             E                ","                E             E                ","               EE             EE               ","               EE             EE               ","               E    FD   DF    E               ","              EE     D   D     EE              ","              EE     D   D     EE              ","              E      D   D      E              ","             EE      D   D      EE             ","             EE      D   D      EE             ","             E                   E             ","            EE                   EE            ","            EE                   EE            ","           EE                     EE           ","          EEE       XD   DX       EEE          ","         EEE        XD   DX        EEE         ","        EE          XD   DX          EE        ","F     FFF         FFFDDDDDFFF         FFF     F","A     AAAAAAAA    AAAXXXXXAAA    AAAAAAAA     A")
                .aisle("                     F D F                     ","                       D                       ","                       D                       ","                       D                       ","                       D                       ","                       D                       ","                    F  D  F                    ","                       D                       ","                  D    D    D                  ","                  D    D    D                  ","                  D    D    D                  ","                  D    D    D                  ","                  D    D    D                  ","                  D    D    D                  ","                  D    D    D                  ","                 DD    D    DD                 ","                 D     D     D                 ","                 D     D     D                 ","                 D   F D F   D                 ","                 D     C     D                 ","                 D     C     D                 ","                 D     C     D                 ","                 D     C     D                 ","                DD     C     DD                ","                D      C      D                ","                D      C      D                ","                D      C      D                ","               DD      C      DD               ","               D     FDCDF     D               ","               D      DCD      D               ","              DD      DCD      DD              ","              D       DCD       D              ","              D       DCD       D              ","             DD      DDCDD      DD             ","             D       D C D       D             ","             D       D C D       D             ","            DD       D C D       DD            ","            D        D C D        D            "," VV        DD VV     XDCDX     VV DD        VV "," VI       DD  VI     XDCDX     IV  DD       IV "," VV    DDDD   VV     XDCDX     VV   DDDD    VV ","FVVFFFFFFD    VVFFFFFDDDDDFFFFFVV    DFFFFFFVVF","AVVAAAAAAAAAAAVV  AAAXXXXXAAA  VVAAAAAAAAAAAVVA")
                .aisle("                      FFF                      ","                       E                       ","                       E                       ","                       E                       ","                       E                       ","                       E                       ","                     F   F                     ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                    E     E                    ","                                               ","                                               ","                      FFF                      ","                                               ","                                               ","                  H         H                  ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      FFF                      ","                                               ","                                               ","                                               ","                                               ","             H                   H             ","                                               ","                                               ","                                               ","                                               ","                      XXX                      ","                      XXX                      ","        D             XXX             D        ","FFFFFFFFFF        FFFFFFFFFFF        FFFFFFFFFF","AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      FFF                      ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                   E       E                   ","                   E       E                   ","                   E       E                   ","                   E       E                   ","                   E       E                   ","                   E       E                   ","                   E       E                   ","                  HE       EH                  ","                   E       E                   ","                   E       E                   ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","              H                 H              ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","        D                             D        "," FFFFFFFFF         FFFFFFFFF         FFFFFFFFF "," AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                                               ","                                               ","                                               ","                                               ","                                               ","                   HH     HH                   ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                  E         E                  ","                                               ","                                               ","                                               ","                                               ","                                               ","              H                 H              ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","        D                             D        ","    FFFFFF          FFFFFFF          FFFFFF    "," AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                                               ","                                               ","                 E           E                 ","                 E           E                 ","                 E           E                 ","                 E           E                 ","                 E           E                 ","                                               ","                                               ","               H               H               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","         D                           D         ","        FFF          F F F          FFF        "," AAAAAAAAAAAAAAAAAAAA     AAAAAAAAAAAAAAAAAAAA ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                E             E                ","                E             E                ","                E             E                ","                E             E                ","                E             E                ","               HE             EH               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","         D                           D         ","        FFF          F F F          FFF        ","  AA  AAAAAAAAAAAAAAA     AAAAAAAAAAAAAAA  AA  ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                                               ","               E               E               ","               EHH           HHE               ","               E               E               ","               E               E               ","               E               E               ","               E               E               ","               E     V V V     E               ","               E     I I I     E               ","               E     V V V     E               ","         FF    E     V V V     E    FF         ","  AA     AAAAAAAAAAAAV V VAAAAAAAAAAAA     AA  ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                  HH DE ED HH                  ","                                               ","                                               ","                                               ","                                               ","                     V V V                     ","                     V V V                     ","                     V V V                     ","                     V V V                     ","  AA     AAAAAAAAAAAAV V VAAAAAAAAAAAA     AA  ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                    HDE EDH                    ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                                               ","                                               ","                                               ","                                               ","                                               ","   AA     AAAAAAAAAAAAAAAAAAAAAAAAAAA     AA   ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                     DE ED                     ","                                               ","                                               ","                                               ","   AA      AAAAAAAAAAAAAAAAAAAAAAAAA      AA   ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     DE ED                     ","                                               ","                                               ","    AA      AAAAAAAAAAAAAAAAAAAAAAA      AA    ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                     DE ED                     ","                     D   D                     ","               FFF           FFF               ","    AA       AAAAAAAAAAAAAAAAAAAAA       AA    ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                      E E                      ","                DD   DE ED   DD                ","               FFFFFFD   DFFFFFF               ","     AA       AAAAAAAAAAAAAAAAAAA       AA     ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                  DDDDE EDDDD                  ","                FFFFFFF FFFFFFF                ","     AAA        AAAAAAAAAAAAAAA        AAA     ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                     D   D                     ","                  FFFFF FFFFF                  ","      AAA       AAAAAAAAAAAAAAA       AAA      ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                  FFFFFFFFFFF                  ","       AAA      AAAAAAAAAAAAAAA      AAA       ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                  FFFF F FFFF                  ","        AAAA     AAAAA   AAAAA     AAAA        ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                  FFFF F FFFF                  ","          AAAA   AAAAA   AAAAA   AAAA          ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                   FFF F FFF                   ","            AAAAAAAAAA   AAAAAAAAAA            ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                     V V V                     ","                     I I I                     ","                     V V V                     ","                   FFV V VFF                   ","              AAAAAAAV V VAAAAAAA              ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                     V V V                     ","                     V V V                     ","                     V V V                     ","                   FFV V VFF                   ","                 AAAAV V VAAAA                 ")
                .aisle("                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                                               ","                    FFFFFFF                    ","                    AAAAAAA                    ")
                .where(' ', any())
                .where('-', air())
                .where('~', selfPredicate())
                .where('D', states(GTQTSMetaBlocks.SPACE_ELEVATOR.getState(GTQTSpaceElevator.ElevatorCasingType.BASIC_CASING)))
                .where('F', states(GTQTSMetaBlocks.SPACE_ELEVATOR.getState(GTQTSpaceElevator.ElevatorCasingType.INTERNAL_STRUCTURE)))
                .where('E', states(GTQTSMetaBlocks.SPACE_ELEVATOR.getState(GTQTSpaceElevator.ElevatorCasingType.SUPPORT_STRUCTURE)))
                .where('A', states(GTQTSMetaBlocks.SPACE_ELEVATOR.getState(GTQTSpaceElevator.ElevatorCasingType.FLOOR)))
                .where('B', states(GTQTSMetaBlocks.SPACE_ELEVATOR.getState(GTQTSpaceElevator.ElevatorCasingType.CABLE_CASING)))
                .where('H', frames(Naquadah))
                .where('X', states(GTQTSMetaBlocks.SPACE_ELEVATOR.getState(GTQTSpaceElevator.ElevatorCasingType.BASIC_CASING))
                        .or(abilities(MultiblockAbility.INPUT_ENERGY, MultiblockAbility.INPUT_LASER).setExactLimit(1))
                        .or(abilities(MultiblockAbility.COMPUTATION_DATA_RECEPTION).setExactLimit(1)))
                .where('C', TiredTraceabilityPredicate.CP_SE_CASING.get())
                .where('I', modulePredicate())
                .where('V', states(GTQTSMetaBlocks.SPACE_ELEVATOR.getState(GTQTSpaceElevator.ElevatorCasingType.BASIC_CASING)))
                .build();
    }
    private final Collection<ISpaceElevatorReceiver> spaceElevatorReceivers = ConcurrentHashMap.newKeySet();

    @Override
    public boolean hasMaintenanceMechanics() {
        return false;
    }

    @Override
    public ICubeRenderer getBaseTexture(IMultiblockPart iMultiblockPart) {
        return GTQTSTextures.ELEVATOR_CASING;
    }

    @SideOnly(Side.CLIENT)

    @Override
    protected ICubeRenderer getFrontOverlay() {
        return Textures.DATA_BANK_OVERLAY;
    }

    @Override
    public void renderMetaTileEntity(CCRenderState renderState, Matrix4 translation, IVertexOperation[] pipeline) {
        super.renderMetaTileEntity(renderState, translation, pipeline);
        getFrontOverlay().renderOrientedState(renderState, translation, pipeline, getFrontFacing(), true,
                true);
    }


    protected TraceabilityPredicate modulePredicate() {
        return new TraceabilityPredicate(blockWorldState -> {
            IBlockState blockState = blockWorldState.getBlockState();
            Block block = blockState.getBlock();
            if(block instanceof GTQTSpaceElevator) {
                GTQTSpaceElevator.ElevatorCasingType casingType = ((GTQTSpaceElevator) blockState.getBlock()).getState(blockState);
                if(casingType == GTQTSpaceElevator.ElevatorCasingType.BASIC_CASING) return true;
            }

            TileEntity tileEntity = blockWorldState.getTileEntity();
            if(!(tileEntity instanceof IGregTechTileEntity)) return false;

            MetaTileEntity metaTileEntity = ((IGregTechTileEntity) tileEntity).getMetaTileEntity();

            if(metaTileEntity instanceof ISpaceElevatorProvider)
                return false;

            if(!(metaTileEntity instanceof ISpaceElevatorReceiver)) return false;

            ISpaceElevatorReceiver spaceElevatorReceiver = (ISpaceElevatorReceiver) metaTileEntity;
            if(spaceElevatorReceiver.getSpaceElevator() != this) {
                spaceElevatorReceiver.setSpaceElevator(this);
                this.spaceElevatorReceivers.add(spaceElevatorReceiver);
            }
            return true;
        });
    }
    @Override
    public void addInformation(ItemStack stack, World world, @Nonnull List<String> tooltip, boolean advanced) {
        super.addInformation(stack, world, tooltip, advanced);
        tooltip.add(I18n.format(""));
    }
}
